import groovy.json.JsonSlurper 
 
 
 
 
node { 
   stage('init') { 
     checkout scm 
   } 
    
   stage('build') { 
     
   } 
    
   stage('deploy') { 
     def resourceGroup = 'test1jenkins'  
    
     // login Azure 
     withCredentials([azureServicePrincipal('2d8c850e-66e5-4521-ae0c-44b1e0fb1e80')]) { 
       ansiblePlaybook installation: 'ansible', 
      playbook: 'vamyaml.yaml' 
     } 
     
     sh 'az logout' 
   } 
 } 
